(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{181:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(41),r=a.n(c),l=(a(181),a(5)),s=a(19),d=a(175),i=a.n(d),o=a(38),u=i()({game:[function(e,t){switch(t.type){case"SET_GAME":return Object(l.a)(Object(l.a)({},e),{},{isStarted:!e.isStarted});case"SET_IS_PLAYING":return Object(l.a)(Object(l.a)({},e),{},{isPlaying:t.payload});case"SET_DECK":return Object(l.a)(Object(l.a)({},e),{},{deck_id:t.payload});case"SET_PLAYER_CARDS":var a=[].concat(Object(o.a)(e.player_cards),Object(o.a)(t.payload));return Object(l.a)(Object(l.a)({},e),{},{player_cards:a});case"SET_DEALER_CARDS":var n=[].concat(Object(o.a)(e.dealer_cards),Object(o.a)(t.payload));return Object(l.a)(Object(l.a)({},e),{},{dealer_cards:n});case"CLEAR_PLAYER_CARDS":return Object(l.a)(Object(l.a)({},e),{},{player_cards:t.payload});case"CLEAR_DEALER_CARDS":return Object(l.a)(Object(l.a)({},e),{},{dealer_cards:t.payload});case"CHANGE_PLAYER_CARDS_VALUE":var c=e.player_cards_value+t.payload;return Object(l.a)(Object(l.a)({},e),{},{player_cards_value:c});case"CHANGE_DEALER_CARDS_VALUE":var r=e.dealer_cards_value+t.payload;return Object(l.a)(Object(l.a)({},e),{},{dealer_cards_value:r});case"CLEAR_PLAYER_CARDS_VALUE":return Object(l.a)(Object(l.a)({},e),{},{player_cards_value:t.payload});case"CLEAR_DEALER_CARDS_VALUE":return Object(l.a)(Object(l.a)({},e),{},{dealer_cards_value:t.payload});case"SET_BET":return Object(l.a)(Object(l.a)({},e),{},{bet:t.payload});case"SET_BANK":return Object(l.a)(Object(l.a)({},e),{},{bank:t.payload});case"SET_DOUBLE_BET":var s=2*e.bet,d=e.bank-e.bet;return Object(l.a)(Object(l.a)({},e),{},{bet:s,bank:d});case"SET_CONTINUE_GAME":return Object(l.a)(Object(l.a)({},e),{},{deck_id:t.payload.deck_id,player_cards:t.payload.player_cards,player_cards_value:t.payload.player_cards_value,dealer_cards:t.payload.dealer_cards,dealer_cards_value:t.payload.dealer_cards_value,bank:t.payload.bank,bet:t.payload.bet,isStarted:t.payload.isStarted,isPlaying:t.payload.isPlaying,round:t.payload.round});case"CHANGE_ROUND":return Object(l.a)(Object(l.a)({},e),{},{round:e.round+1});case"CLEAR_ROUND":return Object(l.a)(Object(l.a)({},e),{},{round:0});case"SET_ROUND_LIST":var i=[].concat(Object(o.a)(e.round_list),[t.payload]);return Object(l.a)(Object(l.a)({},e),{},{round_list:i});default:return e}},{deck_id:"",player_cards:[],player_cards_value:0,dealer_cards:[],dealer_cards_value:0,bank:1e3,bet:0,isStarted:!1,isPlaying:!1,round:0,round_list:[]}],ranking:[function(e,t){switch(t.type){case"ADD_RESULT":var a=[].concat(Object(o.a)(e.bestResults),[t.payload]);return Object(l.a)(Object(l.a)({},e),{},{bestResults:a});case"SET_RANKING":var n=[].concat(Object(o.a)(e.bestResults),Object(o.a)(t.payload));return Object(l.a)(Object(l.a)({},e),{},{bestResults:n});default:return e}},{bestResults:[]}]}),b=Object(s.a)(u,2),_=b[0],j=b[1],y=a(2),p=Object(n.createContext)(j),O=Object(n.createContext)((function(){return 0})),f=function(e){var t=Object(n.useReducer)(_,j),a=Object(s.a)(t,2),c=a[0],r=a[1];return Object(y.jsx)(O.Provider,{value:r,children:Object(y.jsx)(p.Provider,{value:c,children:e.children})})},E=function(){return Object(n.useContext)(O)},h=function(e){return Object(n.useContext)(p)[e]},m=a(176),g=a.n(m).a.create({baseURL:"https://deckofcardsapi.com/api/deck/"}),S=function(e){try{g.get("".concat(e,"/shuffle/")).then((function(e){})).catch((function(e){}))}catch(t){}},A=function(e){try{e({type:"SET_GAME"})}catch(t){}},v=function(e){try{e({type:"CLEAR_ROUND"})}catch(t){}},R=function(e,t){try{e({type:"SET_IS_PLAYING",payload:t})}catch(a){}},x=function(e,t,a){try{e({type:"SET_BET",payload:t}),e({type:"SET_BANK",payload:a}),e({type:"CHANGE_ROUND"})}catch(n){e({type:"SET_IS_PLAYING",payload:!1})}},C=function(e){try{e({type:"SET_BET",payload:0}),e({type:"CLEAR_PLAYER_CARDS_VALUE",payload:0}),e({type:"CLEAR_DEALER_CARDS_VALUE",payload:0}),e({type:"CLEAR_PLAYER_CARDS",payload:[]}),e({type:"CLEAR_DEALER_CARDS",payload:[]})}catch(t){}},N=function(e,t,a,n,c){try{g.get("".concat(t,"/draw/?count=").concat(e)).then((function(e){var t=e.data;a({type:n,payload:t.cards});var r=0;t.cards.map((function(e){"ACE"===e.value?r+=11===r||c>11?1:11:"KING"===e.value||"QUEEN"===e.value||"JACK"===e.value?r+=10:r+=parseInt(e.value)})),a("SET_PLAYER_CARDS"===n?{type:"CHANGE_PLAYER_CARDS_VALUE",payload:r}:{type:"CHANGE_DEALER_CARDS_VALUE",payload:r}),a({type:"SET_IS_PLAYING",payload:!0})})).catch((function(e){a({type:"SET_IS_PLAYING",payload:!1})}))}catch(r){a({type:"SET_IS_PLAYING",payload:!1})}},k=a(422),L=a(424),T=a(423),D=Object(k.a)((function(e){return Object(L.a)({paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}})})),P=function(e){var t=D(),a=Object(y.jsx)("div",{className:"d-flex justify-content-center",children:Object(y.jsx)("div",{className:t.paper,children:e.children})});return Object(y.jsx)("div",{onClick:e.changeOpenRanking,children:Object(y.jsx)(T.a,{open:e.onOpenRanking,onClose:e.changeOpenRanking,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:a})})},I=function(e){return Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:e.card.images.png,className:"img-fluid",alt:""})})},G=function(e){var t,a,c,r,l,d=h("game"),i=E(),o=Object(n.useState)(!1),u=Object(s.a)(o,2),b=u[0],_=u[1];(Object(n.useEffect)((function(){b&&(N(1,d.deck_id,i,"SET_PLAYER_CARDS",d.player_cards_value),setTimeout((function(){_(!1)}),1e3))}),[b]),t=d.player_cards.map((function(e,t){return Object(y.jsx)(I,{card:e},t)})),e.isStand)?a=d.dealer_cards.map((function(e,t){return Object(y.jsx)(I,{card:e},t)})):(l=d.dealer_cards.slice(1,2).map((function(e,t){return Object(y.jsx)(I,{card:e},t)})),c=Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:"https://i.ibb.co/0Zt2Y9S/card.png",className:"img-fluid",alt:""})}),a=Object(y.jsxs)(n.Fragment,{children:[c,l]}));return r=Object(y.jsxs)(n.Fragment,{children:[Object(y.jsx)("p",{style:{textAlign:"center",color:"white",margin:0},children:"Dealer Cards"}),e.isStand?Object(y.jsxs)("p",{className:"m-1",style:{textAlign:"center",color:"white",margin:0},children:["Dealer cards value: ",d.dealer_cards_value]}):null,Object(y.jsx)("div",{className:"d-flex justify-content-center",children:a}),Object(y.jsx)("p",{style:{textAlign:"center",color:"white",margin:0},children:"Player Cards"}),Object(y.jsxs)("p",{className:"m-1",style:{textAlign:"center",color:"white",margin:0},children:["Player cards value: ",d.player_cards_value]}),Object(y.jsx)("div",{className:"d-flex justify-content-center",children:t}),Object(y.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:!!e.isStand||(!!e.onEndRound||!!b),onClick:function(){return _(!0)},children:"Hit"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:!!e.isStand||!!e.onEndRound,onClick:function(){return e.onIsStandChange()},children:"Stand"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:!!e.isStand||(!!e.onEndRound||(d.player_cards.length>2||!(d.bank>=d.bet))),onClick:function(){return function(e){try{e({type:"SET_DOUBLE_BET"})}catch(t){}}(i),N(1,d.deck_id,i,"SET_PLAYER_CARDS",d.player_cards_value),void e.onIsStandChange()},children:"Double Down"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:!!e.isStand||!!e.onEndRound,onClick:function(){return function(e,t){try{C(e),e({type:"SET_BANK",payload:1e3}),v(e),e({type:"SET_IS_PLAYING",payload:!1}),S(t)}catch(a){}}(i,d.deck_id)},children:"Reset"})]})]}),Object(y.jsx)(n.Fragment,{children:r})},w=function(e){var t=n.useState(e),a=Object(s.a)(t,2),c=a[0],r=a[1];return{message:c,showMessage:function(e){r(e),window.setTimeout((function(){r(null)}),2e3)}}},Y=function(e){var t=h("game"),a=E(),c=w(null),r=c.message,l=c.showMessage,d=Object(n.useState)(t.bank),i=Object(s.a)(d,2),o=i[0],u=i[1],b=Object(n.useState)(t.bet),_=Object(s.a)(b,2),j=_[0],p=_[1],O=Object(n.useState)(!1),f=Object(s.a)(O,2),m=f[0],k=f[1],L=Object(n.useState)(!1),T=Object(s.a)(L,2),D=T[0],I=T[1],Y=function(e){o>=e&&(u(o-e),p(j+e))},U=function(){setTimeout((function(){I(!0),l("You won ".concat(j+1.5*j,"$")),k(!1)}),2e3),setTimeout((function(){I(!1),function(e,t,a){var n=a+(t+1.5*t);try{C(e),e({type:"SET_BANK",payload:n})}catch(c){}}(a,j,o),R(a,!1)}),4e3)},B=function(){setTimeout((function(){I(!0),l("You lost ".concat(j,"$")),k(!1)}),2e3),setTimeout((function(){I(!1),C(a),R(a,!1)}),4e3)},K=function(){setTimeout((function(){I(!0),l("You draw"),k(!1)}),2e3),setTimeout((function(){I(!1),function(e,t,a){var n=a+t;try{C(e),e({type:"SET_BANK",payload:n})}catch(c){}}(a,j,o),R(a,!1)}),4e3)};Object(n.useEffect)((function(){""===t.deck_id&&function(e){try{g.get("new/shuffle/?deck_count=6").then((function(t){var a=t.data;e({type:"SET_DECK",payload:a.deck_id})})).catch((function(e){}))}catch(t){}}(a)}),[]),Object(n.useEffect)((function(){t.isPlaying||5!==t.round||(S(t.deck_id),function(e,t){try{e({type:"ADD_RESULT",payload:t}),localStorage.removeItem("lastGame"),e({type:"SET_BANK",payload:1e3})}catch(a){console.log("tryCatch setGame BLAD "+a)}}(a,t.bank),A(a),v(a),e.onSetLastGame(),e.changeOpenRanking())}),[t.isPlaying]),Object(n.useEffect)((function(){u(t.bank),p(t.bet)}),[t.bet,t.bank]),Object(n.useEffect)((function(){21===t.player_cards_value?(k(!0),t.player_cards_value!==t.dealer_cards_value?U():K()):t.player_cards_value>21&&(k(!0),B())}),[t.player_cards_value]),Object(n.useEffect)((function(){m&&t.player_cards_value<21&&(t.dealer_cards_value<17&&t.dealer_cards_value<t.player_cards_value?N(1,t.deck_id,a,"SET_DEALER_CARDS",t.dealer_cards_value):t.dealer_cards_value<t.player_cards_value?U():t.player_cards_value===t.dealer_cards_value?K():B(),t.dealer_cards_value>21&&(k(!0),U()))}),[t.dealer_cards_value,m]),Object(n.useEffect)((function(){t.bank<25&&!t.isPlaying&&!m&&(setTimeout((function(){I(!0),l("You Lost")}),1e3),setTimeout((function(){I(!1),localStorage.removeItem("lastGame"),S(t.deck_id),A(a),v(a),e.onSetLastGame(),function(e){try{e({type:"SET_BANK",payload:1e3})}catch(t){}}(a)}),3e3))}),[t.isPlaying]);Object(n.useEffect)((function(){t.isPlaying&&(N(2,t.deck_id,a,"SET_PLAYER_CARDS",t.player_cards_value),N(2,t.deck_id,a,"SET_DEALER_CARDS",t.dealer_cards_value),x(a,j,o))}),[t.isPlaying]);var F;return t.isPlaying||(F=Object(y.jsx)(n.Fragment,{children:Object(y.jsxs)("div",{className:"d-flex justify-content-center",children:[o<=500?Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:o<25,onClick:function(){return Y(25)},children:"25$"}):null,Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:o<50,onClick:function(){return Y(50)},children:"50$"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:o<100,onClick:function(){return Y(100)},children:"100$"}),o>500?Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:o<500,onClick:function(){return Y(500)},children:"500$"}):null,Object(y.jsx)("button",{className:"btn btn-light mr-2",onClick:function(){return u(o+j),void p(0)},children:"Clear Bet"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:j<=0||!!t.isPlaying,onClick:function(){return N(2,t.deck_id,a,"SET_PLAYER_CARDS",t.player_cards_value),N(2,t.deck_id,a,"SET_DEALER_CARDS",t.dealer_cards_value),void x(a,j,o)},children:"PLAY"})]})})),t.dealer_cards.length&&t.player_cards,t.isPlaying&&t.dealer_cards.length&&t.player_cards&&(F=Object(y.jsx)(G,{onIsStandChange:function(){return k(!m)},isStand:m,onEndRound:D})),Object(y.jsx)("div",{className:"game d-flex justify-content-center align-items-center",children:Object(y.jsxs)("div",{className:"container",children:[Object(y.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(y.jsxs)("p",{className:"m-1",style:{color:"white"},children:["BANK: ",o,"$"]}),Object(y.jsxs)("p",{className:"m-1",style:{color:"white"},children:["BET: ",0===t.bet?j:t.bet,"$"]}),t.isPlaying?Object(y.jsxs)("p",{className:"m-1",style:{color:"white"},children:["Round: ",t.round]}):null]}),F,D?Object(y.jsx)(P,{onOpenRanking:!0,changeOpenRanking:function(){},children:Object(y.jsx)("p",{style:{textAlign:"center"},children:r})}):null]})})},U=function(e){return Object(y.jsx)(n.Fragment,{children:Object(y.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Rank ",e.index+1,Object(y.jsxs)("span",{className:"badge badge-primary badge-pill",children:[e.rank,"$"]})]})})},B=function(e){var t=h("game"),a=h("ranking"),c=E(),r=Object(n.useState)(!1),d=Object(s.a)(r,2),i=d[0],o=d[1],u=Object(n.useState)({bank:0,bet:0,dealer_cards:[],dealer_cards_value:0,deck_id:"",isPlaying:!1,isStarted:!1,player_cards:[],player_cards_value:0,round:0}),b=Object(s.a)(u,2),_=b[0],j=b[1];window.addEventListener("beforeunload",(function(e){return e.preventDefault(),localStorage.setItem("lastGame",JSON.stringify(t)),localStorage.setItem("ranking",JSON.stringify(a.bestResults)),e.returnValue="ASDASDAD"})),Object(n.useEffect)((function(){var e=localStorage.getItem("lastGame");j(JSON.parse(e))}),[]),Object(n.useEffect)((function(){var e=localStorage.getItem("ranking");!function(e,t){try{e({type:"SET_RANKING",payload:t})}catch(a){console.log("tryCatch setGame BLAD "+a)}}(c,JSON.parse(e))}),[]);var p,O=a.bestResults.sort((function(e,t){return t-e}));p=0===O.length?Object(y.jsx)("p",{style:{textAlign:"center",margin:0},children:"No results"}):O.slice(0,10).map((function(e,t){return Object(y.jsx)(U,{rank:e,index:t},t)}));var f=Object(y.jsx)(P,{onOpenRanking:i,changeOpenRanking:function(){return o(!i)},children:Object(y.jsxs)(n.Fragment,{children:[Object(y.jsx)("div",{className:"d-flex justify-content-center",children:Object(y.jsx)("h1",{style:{textAlign:"center"},children:"TOP HISTORIC RESULTS"})}),Object(y.jsx)("ul",{className:"list-group",children:p})]})});return Object(y.jsx)(n.Fragment,{children:t.isStarted?Object(y.jsx)(Y,{onSetLastGame:function(){return j(Object(l.a)(Object(l.a)({},_),{},{bank:0,bet:0,dealer_cards:[],dealer_cards_value:0,deck_id:"",isPlaying:!1,isStarted:!1,player_cards:[],player_cards_value:0,round:0}))},changeOpenRanking:function(){return o(!i)}}):Object(y.jsxs)("div",{className:"mainPage container-fluid d-flex justify-content-center align-items-center",children:[f,Object(y.jsx)("button",{className:"btn btn-light mt-6 mr-2",onClick:function(){return A(c)},children:"New Game"}),Object(y.jsx)("button",{className:"btn btn-light mt-6 mr-2 ml-2",onClick:function(){return o(!i)},children:"Ranking"}),0!==_.round?Object(y.jsx)("button",{className:"btn btn-light mt-6 ml-2",onClick:function(){return function(e,t){try{e({type:"SET_CONTINUE_GAME",payload:t})}catch(a){}}(c,_)},children:"Continue"}):null]})})},K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,426)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),r(e),l(e)}))};r.a.render(Object(y.jsx)(n.StrictMode,{children:Object(y.jsx)(f,{children:Object(y.jsx)(B,{})})}),document.getElementById("root")),K()}},[[409,1,2]]]);
//# sourceMappingURL=main.57d3d0a6.chunk.js.map