(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{181:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(41),r=a.n(c),l=(a(181),a(5)),s=a(18),d=a(175),i=a.n(d),o=a(38),u=i()({game:[function(e,t){switch(t.type){case"SET_GAME":return Object(l.a)(Object(l.a)({},e),{},{isStarted:!e.isStarted});case"SET_IS_PLAYING":return Object(l.a)(Object(l.a)({},e),{},{isPlaying:t.payload});case"SET_DECK":return Object(l.a)(Object(l.a)({},e),{},{deck_id:t.payload});case"SET_PLAYER_CARDS":var a=[].concat(Object(o.a)(e.player_cards),Object(o.a)(t.payload));return Object(l.a)(Object(l.a)({},e),{},{player_cards:a});case"SET_DEALER_CARDS":var n=[].concat(Object(o.a)(e.dealer_cards),Object(o.a)(t.payload));return Object(l.a)(Object(l.a)({},e),{},{dealer_cards:n});case"CLEAR_PLAYER_CARDS":return Object(l.a)(Object(l.a)({},e),{},{player_cards:t.payload});case"CLEAR_DEALER_CARDS":return Object(l.a)(Object(l.a)({},e),{},{dealer_cards:t.payload});case"CHANGE_PLAYER_CARDS_VALUE":var c=e.player_cards_value+t.payload;return Object(l.a)(Object(l.a)({},e),{},{player_cards_value:c});case"CHANGE_DEALER_CARDS_VALUE":var r=e.dealer_cards_value+t.payload;return Object(l.a)(Object(l.a)({},e),{},{dealer_cards_value:r});case"CLEAR_PLAYER_CARDS_VALUE":return Object(l.a)(Object(l.a)({},e),{},{player_cards_value:t.payload});case"CLEAR_DEALER_CARDS_VALUE":return Object(l.a)(Object(l.a)({},e),{},{dealer_cards_value:t.payload});case"SET_BET":return Object(l.a)(Object(l.a)({},e),{},{bet:t.payload});case"SET_BANK":return Object(l.a)(Object(l.a)({},e),{},{bank:t.payload});case"SET_DOUBLE_BET":var s=2*e.bet,d=e.bank-e.bet;return Object(l.a)(Object(l.a)({},e),{},{bet:s,bank:d});case"SET_CONTINUE_GAME":return Object(l.a)(Object(l.a)({},e),{},{deck_id:t.payload.deck_id,player_cards:t.payload.player_cards,player_cards_value:t.payload.player_cards_value,dealer_cards:t.payload.dealer_cards,dealer_cards_value:t.payload.dealer_cards_value,bank:t.payload.bank,bet:t.payload.bet,isStarted:t.payload.isStarted,isPlaying:t.payload.isPlaying,round:t.payload.round,round_list:t.payload.round_list});case"CHANGE_ROUND":return Object(l.a)(Object(l.a)({},e),{},{round:e.round+1});case"CLEAR_ROUND":return Object(l.a)(Object(l.a)({},e),{},{round:0});case"SET_ROUND_LIST":var i=[].concat(Object(o.a)(e.round_list),[{player_cards:e.player_cards,player_cards_value:e.player_cards_value,dealer_cards:e.dealer_cards,dealer_cards_value:e.dealer_cards_value,round:e.round,bank:e.bank,bet:e.bet}]);return Object(l.a)(Object(l.a)({},e),{},{round_list:i});case"CLEAR_ROUND_LIST":return Object(l.a)(Object(l.a)({},e),{},{round_list:[]});default:return e}},{deck_id:"",player_cards:[],player_cards_value:0,dealer_cards:[],dealer_cards_value:0,bank:1e3,bet:0,isStarted:!1,isPlaying:!1,round:0,round_list:[]}],ranking:[function(e,t){switch(t.type){case"ADD_RESULT":var a=[].concat(Object(o.a)(e.bestResults),[t.payload]);return Object(l.a)(Object(l.a)({},e),{},{bestResults:a});case"SET_RANKING":var n=[].concat(Object(o.a)(e.bestResults),Object(o.a)(t.payload));return Object(l.a)(Object(l.a)({},e),{},{bestResults:n});default:return e}},{bestResults:[]}]}),b=Object(s.a)(u,2),j=b[0],_=b[1],O=a(2),p=Object(n.createContext)(_),y=Object(n.createContext)((function(){return 0})),h=function(e){var t=Object(n.useReducer)(j,_),a=Object(s.a)(t,2),c=a[0],r=a[1];return Object(O.jsx)(y.Provider,{value:r,children:Object(O.jsx)(p.Provider,{value:c,children:e.children})})},f=function(){return Object(n.useContext)(y)},m=function(e){return Object(n.useContext)(p)[e]},E=a(176),x=a.n(E).a.create({baseURL:"https://deckofcardsapi.com/api/deck/"}),g=function(e){try{x.get("".concat(e,"/shuffle/")).then((function(e){})).catch((function(e){}))}catch(t){}},S=function(e){try{e({type:"SET_GAME"})}catch(t){}},v=function(e){try{e({type:"CLEAR_ROUND"}),e({type:"CLEAR_ROUND_LIST"})}catch(t){}},A=function(e,t){try{e({type:"SET_IS_PLAYING",payload:t})}catch(a){}},R=function(e){try{e({type:"SET_ROUND_LIST"}),e({type:"SET_BET",payload:0}),e({type:"CLEAR_PLAYER_CARDS_VALUE",payload:0}),e({type:"CLEAR_DEALER_CARDS_VALUE",payload:0}),e({type:"CLEAR_PLAYER_CARDS",payload:[]}),e({type:"CLEAR_DEALER_CARDS",payload:[]})}catch(t){}},N=function(e,t,a,n,c){try{x.get("".concat(t,"/draw/?count=").concat(e)).then((function(e){var t=e.data;a({type:n,payload:t.cards});var r=0;t.cards.map((function(e){"ACE"===e.value?r+=11===r||c>11?1:11:"KING"===e.value||"QUEEN"===e.value||"JACK"===e.value?r+=10:r+=parseInt(e.value)})),a("SET_PLAYER_CARDS"===n?{type:"CHANGE_PLAYER_CARDS_VALUE",payload:r}:{type:"CHANGE_DEALER_CARDS_VALUE",payload:r}),a({type:"SET_IS_PLAYING",payload:!0})})).catch((function(e){a({type:"SET_IS_PLAYING",payload:!1})}))}catch(r){a({type:"SET_IS_PLAYING",payload:!1})}},C=a(422),k=a(424),L=a(423),T=Object(C.a)((function(e){return Object(k.a)({paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}})})),D=function(e){var t=T(),a=Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("div",{className:t.paper,children:e.children})});return Object(O.jsx)("div",{onClick:e.changeOpenRanking,children:Object(O.jsx)(L.a,{open:e.onOpenRanking,onClose:e.changeOpenRanking,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:a})})},P=function(e){return Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:e.card.images.png,className:"img-fluid",alt:""})})},I=function(e){var t,a,c,r,l,d=m("game"),i=f(),o=Object(n.useState)(!1),u=Object(s.a)(o,2),b=u[0],j=u[1];(Object(n.useEffect)((function(){b&&(N(1,d.deck_id,i,"SET_PLAYER_CARDS",d.player_cards_value),setTimeout((function(){j(!1)}),1e3))}),[b]),t=d.player_cards.map((function(e,t){return Object(O.jsx)(P,{card:e},t)})),e.isStand)?a=d.dealer_cards.map((function(e,t){return Object(O.jsx)(P,{card:e},t)})):(l=d.dealer_cards.slice(1,2).map((function(e,t){return Object(O.jsx)(P,{card:e},t)})),c=Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:"https://i.ibb.co/0Zt2Y9S/card.png",className:"img-fluid",alt:""})}),a=Object(O.jsxs)(n.Fragment,{children:[c,l]}));return r=Object(O.jsxs)(n.Fragment,{children:[Object(O.jsx)("p",{className:"modal-p modal-p__text text-white",children:"Dealer Cards"}),e.isStand?Object(O.jsxs)("p",{className:"modal-p modal-p__text m-1 text-white",children:["Dealer cards value: ",d.dealer_cards_value]}):null,Object(O.jsx)("div",{className:"d-flex justify-content-center",children:a}),Object(O.jsx)("p",{className:"modal-p modal-p__text text-white",children:"Player Cards"}),Object(O.jsxs)("p",{className:"modal-p modal-p__text m-1 text-white",children:["Player cards value: ",d.player_cards_value]}),Object(O.jsx)("div",{className:"d-flex justify-content-center",children:t}),Object(O.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(O.jsx)("button",{className:"btn btn-light me-2",disabled:!!e.isStand||(!!e.onEndRound||!!b),onClick:function(){return j(!0)},children:"Hit"}),Object(O.jsx)("button",{className:"btn btn-light me-2",disabled:!!e.isStand||!!e.onEndRound,onClick:function(){return e.onIsStandChange()},children:"Stand"}),Object(O.jsx)("button",{className:"btn btn-light me-2",disabled:!!e.isStand||(!!e.onEndRound||(d.player_cards.length>2||!(d.bank>=d.bet))),onClick:function(){return function(e){try{e({type:"SET_DOUBLE_BET"})}catch(t){}}(i),N(1,d.deck_id,i,"SET_PLAYER_CARDS",d.player_cards_value),void e.onIsStandChange()},children:"Double Down"}),Object(O.jsx)("button",{className:"btn btn-light me-2",disabled:!!e.isStand||!!e.onEndRound,onClick:function(){return function(e,t){try{R(e),e({type:"SET_BANK",payload:1e3}),v(e),e({type:"SET_IS_PLAYING",payload:!1}),g(t),e({type:"CLEAR_ROUND_LIST"})}catch(a){}}(i,d.deck_id)},children:"Reset"})]})]}),Object(O.jsx)(n.Fragment,{children:r})},w=function(e){var t=n.useState(e),a=Object(s.a)(t,2),c=a[0],r=a[1];return{message:c,showMessage:function(e){r(e),window.setTimeout((function(){r(null)}),2e3)}}},G=function(e){var t=e.round.player_cards.map((function(e){return e.value+" "})),a=e.round.dealer_cards.map((function(e){return e.value+" "}));return Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"row",children:e.round.round}),Object(O.jsx)("td",{children:e.round.bet}),Object(O.jsx)("td",{children:e.round.bank}),Object(O.jsx)("td",{children:t}),Object(O.jsx)("td",{children:a})]})})},U=function(e){var t,a,c=m("game"),r=f(),l=w(null),d=l.message,i=l.showMessage,o=Object(n.useState)(!1),u=Object(s.a)(o,2),b=u[0],j=u[1],_=Object(n.useState)(c.bank),p=Object(s.a)(_,2),y=p[0],h=p[1],E=Object(n.useState)(c.bet),C=Object(s.a)(E,2),k=C[0],L=C[1],T=Object(n.useState)(!1),P=Object(s.a)(T,2),U=P[0],Y=P[1],B=Object(n.useState)(!1),K=Object(s.a)(B,2),F=K[0],H=K[1],V=function(e){y>=e&&(h(y-e),L(k+e))},$=function(){setTimeout((function(){H(!0),i("You won ".concat(k+1.5*k,"$")),Y(!1)}),2e3),setTimeout((function(){H(!1),function(e,t,a){var n=a+(t+1.5*t);try{R(e),e({type:"SET_BANK",payload:n})}catch(c){}}(r,k,y),A(r,!1)}),4e3)},J=function(){setTimeout((function(){H(!0),i("You lost ".concat(k,"$")),Y(!1)}),2e3),setTimeout((function(){H(!1),R(r),A(r,!1)}),4e3)},M=function(){setTimeout((function(){H(!0),i("You draw"),Y(!1)}),2e3),setTimeout((function(){H(!1),function(e,t,a){var n=a+t;try{R(e),e({type:"SET_BANK",payload:n})}catch(c){}}(r,k,y),A(r,!1)}),4e3)};Object(n.useEffect)((function(){""===c.deck_id&&function(e){try{x.get("new/shuffle/?deck_count=6").then((function(t){var a=t.data;e({type:"SET_DECK",payload:a.deck_id})})).catch((function(e){}))}catch(t){}}(r)}),[]),Object(n.useEffect)((function(){21===c.player_cards_value?(Y(!0),c.player_cards_value!==c.dealer_cards_value?$():M()):c.player_cards_value>21&&(Y(!0),J())}),[c.player_cards_value]),Object(n.useEffect)((function(){U&&c.dealer_cards_value>21&&$(),U&&c.player_cards_value<21&&c.dealer_cards_value<=21&&(c.dealer_cards_value<17&&c.dealer_cards_value<c.player_cards_value?N(1,c.deck_id,r,"SET_DEALER_CARDS",c.dealer_cards_value):c.dealer_cards_value<c.player_cards_value?$():c.player_cards_value===c.dealer_cards_value?M():J())}),[c.dealer_cards_value,U]),Object(n.useEffect)((function(){c.isPlaying||5!==c.round||(g(c.deck_id),function(e,t){try{0!==t&&e({type:"ADD_RESULT",payload:t}),localStorage.removeItem("lastGame"),e({type:"SET_BANK",payload:1e3})}catch(a){}}(r,c.bank),S(r),e.onSetLastGame(),e.changeOpenRanking(),v(r))}),[c.isPlaying]),Object(n.useEffect)((function(){h(c.bank),L(c.bet)}),[c.bet,c.bank]),Object(n.useEffect)((function(){c.bank<25&&!c.isPlaying&&!U&&(setTimeout((function(){H(!0),i("You Lost")}),1e3),setTimeout((function(){H(!1),localStorage.removeItem("lastGame"),g(c.deck_id),S(r),e.onSetLastGame(),function(e){try{e({type:"SET_BANK",payload:1e3})}catch(t){}}(r),v(r)}),3e3))}),[c.isPlaying]),Object(n.useEffect)((function(){c.isPlaying&&0===c.player_cards.length&&(N(2,c.deck_id,r,"SET_PLAYER_CARDS",c.player_cards_value),N(2,c.deck_id,r,"SET_DEALER_CARDS",c.dealer_cards_value),function(e,t,a){try{e({type:"SET_BET",payload:t}),e({type:"SET_BANK",payload:a}),e({type:"CHANGE_ROUND"})}catch(n){e({type:"SET_IS_PLAYING",payload:!1})}}(r,k,y))}),[c.isPlaying]),c.isPlaying||(t=Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)("div",{className:"d-flex justify-content-center",children:[y<500?Object(O.jsx)("button",{className:"btn btn-light me-1",disabled:y<25,onClick:function(){return V(25)},children:"25$"}):null,Object(O.jsx)("button",{className:"btn btn-light me-1",disabled:y<50,onClick:function(){return V(50)},children:"50$"}),Object(O.jsx)("button",{className:"btn btn-light me-1",disabled:y<100,onClick:function(){return V(100)},children:"100$"}),y>=500?Object(O.jsx)("button",{className:"btn btn-light me-1",disabled:y<500,onClick:function(){return V(500)},children:"500$"}):null,Object(O.jsx)("button",{className:"btn btn-light me-1",disabled:0===y,onClick:function(){return V(y)},children:"Bet All"}),Object(O.jsx)("button",{className:"btn btn-light me-1",onClick:function(){return h(y+k),void L(0)},children:"Clear Bet"}),Object(O.jsx)("button",{className:"btn btn-light me-1",disabled:k<=0||!!c.isPlaying,onClick:function(){return A(r,!0)},children:"PLAY"})]})})),c.isPlaying&&c.dealer_cards.length&&c.player_cards&&(t=Object(O.jsx)(I,{onIsStandChange:function(){return Y(!U)},isStand:U,onEndRound:F})),a=0===c.round_list.length?Object(O.jsx)("p",{className:"modal-p modal-p__text",children:"No results"}):c.round_list.map((function(e,t){return Object(O.jsx)(G,{round:e},t)})),c.round_list.map((function(e,t){return Object(O.jsx)("th",{scope:"col",children:t+1})}));var Q=Object(O.jsx)(D,{onOpenRanking:b,changeOpenRanking:function(){return j(!b)},children:Object(O.jsxs)(n.Fragment,{children:[Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("h1",{className:"text-center",children:"Round History"})}),Object(O.jsxs)("table",{className:"table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"col",children:"#"}),Object(O.jsx)("th",{scope:"col",children:"Bet"}),Object(O.jsx)("th",{scope:"col",children:"Bank"}),Object(O.jsx)("th",{scope:"col",children:"Player Cards"}),Object(O.jsx)("th",{scope:"col",children:"Dealer Cards"})]})}),Object(O.jsx)("tbody",{children:a})]})]})});return Object(O.jsx)("div",{className:"game d-flex justify-content-center align-items-center",children:Object(O.jsxs)("div",{className:"container",children:[Q,0===c.round_list.length||c.isPlaying?null:Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("button",{className:"btn btn-light me-1",onClick:function(){return j(!b)},children:"Round History"})}),Object(O.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(O.jsxs)("p",{className:"m-1 text-white",children:["BANK: ",y,"$"]}),Object(O.jsxs)("p",{className:"m-1 text-white",children:["BET: ",0===c.bet?k:c.bet,"$"]}),c.isPlaying?Object(O.jsxs)("p",{className:"m-1 text-white",children:["Round: ",c.round]}):null]}),t,F?Object(O.jsx)(D,{onOpenRanking:!0,changeOpenRanking:function(){},children:Object(O.jsx)("p",{className:"text-center",children:d})}):null]})})},Y=function(e){return Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Rank ",e.index+1,Object(O.jsxs)("span",{className:"badge badge-primary badge-pill",children:[e.rank,"$"]})]})})},B=function(e){var t=m("game"),a=m("ranking"),c=f(),r=Object(n.useState)(!1),d=Object(s.a)(r,2),i=d[0],o=d[1],u=Object(n.useState)({bank:0,bet:0,dealer_cards:[],dealer_cards_value:0,deck_id:"",isPlaying:!1,isStarted:!1,player_cards:[],player_cards_value:0,round:0,round_list:[]}),b=Object(s.a)(u,2),j=b[0],_=b[1];window.addEventListener("beforeunload",(function(e){return e.preventDefault(),localStorage.setItem("lastGame",JSON.stringify(t)),localStorage.setItem("ranking",JSON.stringify(a.bestResults)),e.returnValue="ASDASDAD"})),Object(n.useEffect)((function(){var e=localStorage.getItem("lastGame");_(JSON.parse(e))}),[]),Object(n.useEffect)((function(){var e=localStorage.getItem("ranking");!function(e,t){try{e({type:"SET_RANKING",payload:t})}catch(a){}}(c,JSON.parse(e))}),[]);var p,y=a.bestResults.sort((function(e,t){return t-e}));p=0===y.length?Object(O.jsx)("p",{style:{textAlign:"center",margin:0},children:"No results"}):y.filter((function(e,t){return y.indexOf(e)===t})).slice(0,10).map((function(e,t){return Object(O.jsx)(Y,{rank:e,index:t},t)}));var h=Object(O.jsx)(D,{onOpenRanking:i,changeOpenRanking:function(){return o(!i)},children:Object(O.jsxs)(n.Fragment,{children:[Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("h1",{style:{textAlign:"center"},children:"Top Historic Results"})}),Object(O.jsx)("ul",{className:"list-group",children:p})]})});return Object(O.jsx)(n.Fragment,{children:t.isStarted?Object(O.jsx)(U,{onSetLastGame:function(){return _(Object(l.a)(Object(l.a)({},j),{},{bank:0,bet:0,dealer_cards:[],dealer_cards_value:0,deck_id:"",isPlaying:!1,isStarted:!1,player_cards:[],player_cards_value:0,round:0,round_list:[]}))},changeOpenRanking:function(){return o(!i)}}):Object(O.jsxs)("div",{className:"mainPage container-fluid d-flex justify-content-center align-items-center",children:[h,Object(O.jsx)("button",{className:"btn btn-light mt-6 me-2",onClick:function(){return S(c)},children:"New Game"}),Object(O.jsx)("button",{className:"btn btn-light mt-6 me-2 ms-2",onClick:function(){return o(!i)},children:"Ranking"}),0!==j.round?Object(O.jsx)("button",{className:"btn btn-light mt-6 ms-2",onClick:function(){return function(e,t){try{e({type:"SET_CONTINUE_GAME",payload:t})}catch(a){}}(c,j)},children:"Continue"}):null]})})},K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,426)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),r(e),l(e)}))};r.a.render(Object(O.jsx)(n.StrictMode,{children:Object(O.jsx)(h,{children:Object(O.jsx)(B,{})})}),document.getElementById("root")),K()}},[[409,1,2]]]);
//# sourceMappingURL=main.6da4040a.chunk.js.map