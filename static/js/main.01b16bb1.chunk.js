(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{181:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(41),r=a.n(c),l=(a(181),a(5)),s=a(23),i=a(175),d=a.n(i),o=a(38),u=d()({game:[function(e,t){switch(t.type){case"SET_GAME":return Object(l.a)(Object(l.a)({},e),{},{isStarted:!e.isStarted});case"SET_IS_PLAYING":return Object(l.a)(Object(l.a)({},e),{},{isPlaying:t.payload});case"SET_DECK":return Object(l.a)(Object(l.a)({},e),{},{deck_id:t.payload});case"SET_PLAYER_CARDS":var a=[].concat(Object(o.a)(e.player_cards),Object(o.a)(t.payload));return Object(l.a)(Object(l.a)({},e),{},{player_cards:a});case"SET_DEALER_CARDS":var n=[].concat(Object(o.a)(e.dealer_cards),Object(o.a)(t.payload));return Object(l.a)(Object(l.a)({},e),{},{dealer_cards:n});case"CLEAR_PLAYER_CARDS":return Object(l.a)(Object(l.a)({},e),{},{player_cards:t.payload});case"CLEAR_DEALER_CARDS":return Object(l.a)(Object(l.a)({},e),{},{dealer_cards:t.payload});case"CHANGE_PLAYER_CARDS_VALUE":var c=e.player_cards_value+t.payload;return Object(l.a)(Object(l.a)({},e),{},{player_cards_value:c});case"CHANGE_DEALER_CARDS_VALUE":var r=e.dealer_cards_value+t.payload;return Object(l.a)(Object(l.a)({},e),{},{dealer_cards_value:r});case"CLEAR_PLAYER_CARDS_VALUE":return Object(l.a)(Object(l.a)({},e),{},{player_cards_value:t.payload});case"CLEAR_DEALER_CARDS_VALUE":return Object(l.a)(Object(l.a)({},e),{},{dealer_cards_value:t.payload});case"SET_BET":return Object(l.a)(Object(l.a)({},e),{},{bet:t.payload});case"SET_BANK":return Object(l.a)(Object(l.a)({},e),{},{bank:t.payload});case"SET_DOUBLE_BET":var s=2*e.bet,i=e.bank-e.bet;return Object(l.a)(Object(l.a)({},e),{},{bet:s,bank:i});case"SET_CONTINUE_GAME":return Object(l.a)(Object(l.a)({},e),{},{deck_id:t.payload.deck_id,player_cards:t.payload.player_cards,player_cards_value:t.payload.player_cards_value,dealer_cards:t.payload.dealer_cards,dealer_cards_value:t.payload.dealer_cards_value,bank:t.payload.bank,bet:t.payload.bet,isStarted:t.payload.isStarted,isPlaying:t.payload.isPlaying,round:t.payload.round});case"CHANGE_ROUND":return Object(l.a)(Object(l.a)({},e),{},{round:e.round+1});case"CLEAR_ROUND":return Object(l.a)(Object(l.a)({},e),{},{round:0});case"SET_ROUND_LIST":var d=[].concat(Object(o.a)(e.round_list),[t.payload]);return Object(l.a)(Object(l.a)({},e),{},{round_list:d});default:return e}},{deck_id:"",player_cards:[],player_cards_value:0,dealer_cards:[],dealer_cards_value:0,bank:1e3,bet:0,isStarted:!1,isPlaying:!1,round:0,round_list:[]}],ranking:[function(e,t){switch(t.type){case"ADD_RESULT":var a=[].concat(Object(o.a)(e.bestResults),[t.payload]);return Object(l.a)(Object(l.a)({},e),{},{bestResults:a});case"SET_RANKING":var n=[].concat(Object(o.a)(e.bestResults),Object(o.a)(t.payload));return Object(l.a)(Object(l.a)({},e),{},{bestResults:n});default:return e}},{bestResults:[]}]}),b=Object(s.a)(u,2),j=b[0],_=b[1],y=a(2),p=Object(n.createContext)(_),O=Object(n.createContext)((function(){return 0})),f=function(e){var t=Object(n.useReducer)(j,_),a=Object(s.a)(t,2),c=a[0],r=a[1];return Object(y.jsx)(O.Provider,{value:r,children:Object(y.jsx)(p.Provider,{value:c,children:e.children})})},h=function(){return Object(n.useContext)(O)},E=function(e){return Object(n.useContext)(p)[e]},g=a(176),m=a.n(g).a.create({baseURL:"https://deckofcardsapi.com/api/deck/"}),S=function(e){try{m.get("".concat(e,"/shuffle/")).then((function(e){})).catch((function(e){}))}catch(t){}},A=function(e){try{e({type:"SET_GAME"})}catch(t){}},v=function(e){try{e({type:"CLEAR_ROUND"})}catch(t){}},x=function(e,t){try{e({type:"SET_IS_PLAYING",payload:t})}catch(a){}},R=function(e){try{e({type:"SET_BET",payload:0}),e({type:"CLEAR_PLAYER_CARDS_VALUE",payload:0}),e({type:"CLEAR_DEALER_CARDS_VALUE",payload:0}),e({type:"CLEAR_PLAYER_CARDS",payload:[]}),e({type:"CLEAR_DEALER_CARDS",payload:[]})}catch(t){}},N=function(e,t,a,n){try{m.get("".concat(t,"/draw/?count=").concat(e)).then((function(e){var t=e.data;a({type:n,payload:t.cards});var c=0;t.cards.map((function(e){"ACE"===e.value?c+=11===c?1:11:"KING"===e.value||"QUEEN"===e.value||"JACK"===e.value?c+=10:c+=parseInt(e.value)})),a("SET_PLAYER_CARDS"===n?{type:"CHANGE_PLAYER_CARDS_VALUE",payload:c}:{type:"CHANGE_DEALER_CARDS_VALUE",payload:c}),a({type:"SET_IS_PLAYING",payload:!0})})).catch((function(e){a({type:"SET_IS_PLAYING",payload:!1})}))}catch(c){a({type:"SET_IS_PLAYING",payload:!1})}},C=a(422),k=a(424),L=a(423),T=Object(C.a)((function(e){return Object(k.a)({paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}})})),D=function(e){var t=T(),a=Object(y.jsx)("div",{className:"d-flex justify-content-center",children:Object(y.jsx)("div",{className:t.paper,children:e.children})});return Object(y.jsx)("div",{onClick:e.changeOpenRanking,children:Object(y.jsx)(L.a,{open:e.onOpenRanking,onClose:e.changeOpenRanking,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:a})})},P=function(e){return Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:e.card.images.png,className:"img-fluid",alt:""})})},I=function(e){var t,a,c,r,l,s=E("game"),i=h();(t=s.player_cards.map((function(e,t){return Object(y.jsx)(P,{card:e},t)})),e.isStand)?a=s.dealer_cards.map((function(e,t){return Object(y.jsx)(P,{card:e},t)})):(l=s.dealer_cards.slice(1,2).map((function(e,t){return Object(y.jsx)(P,{card:e},t)})),c=Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:"https://i.ibb.co/0Zt2Y9S/card.png",className:"img-fluid",alt:""})}),a=Object(y.jsxs)(n.Fragment,{children:[c,l]}));return r=Object(y.jsxs)(n.Fragment,{children:[Object(y.jsx)("p",{style:{textAlign:"center",color:"white",margin:0},children:"Dealer Cards"}),e.isStand?Object(y.jsxs)("p",{className:"m-1",style:{textAlign:"center",color:"white",margin:0},children:["Dealer cards value: ",s.dealer_cards_value]}):null,Object(y.jsx)("div",{className:"d-flex justify-content-center",children:a}),Object(y.jsx)("p",{style:{textAlign:"center",color:"white",margin:0},children:"Player Cards"}),Object(y.jsxs)("p",{className:"m-1",style:{textAlign:"center",color:"white",margin:0},children:["Player cards value: ",s.player_cards_value]}),Object(y.jsx)("div",{className:"d-flex justify-content-center",children:t}),Object(y.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:!!e.isStand||!!e.onEndRound,onClick:function(){return N(1,s.deck_id,i,"SET_PLAYER_CARDS")},children:"Hit"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:!!e.isStand||!!e.onEndRound,onClick:function(){return e.onIsStandChange()},children:"Stand"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:!!e.isStand||(!!e.onEndRound||(s.player_cards.length>2||!(s.bank>=s.bet))),onClick:function(){return function(e){try{e({type:"SET_DOUBLE_BET"})}catch(t){}}(i),N(1,s.deck_id,i,"SET_PLAYER_CARDS"),void e.onIsStandChange()},children:"Double Down"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:!!e.isStand||!!e.onEndRound,onClick:function(){return function(e,t){try{R(e),e({type:"SET_BANK",payload:1e3}),v(e),e({type:"SET_IS_PLAYING",payload:!1}),S(t)}catch(a){}}(i,s.deck_id)},children:"Reset"})]})]}),Object(y.jsx)(n.Fragment,{children:r})},G=function(e){var t=n.useState(e),a=Object(s.a)(t,2),c=a[0],r=a[1];return{message:c,showMessage:function(e){r(e),window.setTimeout((function(){r(null)}),2e3)}}},w=function(e){var t=E("game"),a=h(),c=G(null),r=c.message,l=c.showMessage,i=Object(n.useState)(t.bank),d=Object(s.a)(i,2),o=d[0],u=d[1],b=Object(n.useState)(t.bet),j=Object(s.a)(b,2),_=j[0],p=j[1],O=Object(n.useState)(!1),f=Object(s.a)(O,2),g=f[0],C=f[1],k=Object(n.useState)(!1),L=Object(s.a)(k,2),T=L[0],P=L[1],w=function(e){o>=e&&(u(o-e),p(_+e))},Y=function(){setTimeout((function(){P(!0),l("You won ".concat(1.5*_,"$")),C(!1)}),2e3),setTimeout((function(){P(!1),function(e,t,a){var n=a+1.5*t;try{R(e),e({type:"SET_BANK",payload:n})}catch(c){}}(a,_,o),x(a,!1)}),4e3)},U=function(){setTimeout((function(){P(!0),l("You lost ".concat(_,"$")),C(!1)}),2e3),setTimeout((function(){P(!1),R(a),x(a,!1)}),4e3)},B=function(){setTimeout((function(){P(!0),l("You draw"),C(!1)}),2e3),setTimeout((function(){P(!1),function(e,t,a){var n=a+t;try{R(e),e({type:"SET_BANK",payload:n})}catch(c){}}(a,_,o),x(a,!1)}),4e3)};Object(n.useEffect)((function(){""===t.deck_id&&function(e){try{m.get("new/shuffle/?deck_count=6").then((function(t){var a=t.data;e({type:"SET_DECK",payload:a.deck_id})})).catch((function(e){}))}catch(t){}}(a)}),[]),Object(n.useEffect)((function(){t.isPlaying||5!==t.round||(S(t.deck_id),function(e,t){try{e({type:"ADD_RESULT",payload:t}),localStorage.removeItem("lastGame"),e({type:"SET_BANK",payload:1e3})}catch(a){console.log("tryCatch setGame BLAD "+a)}}(a,t.bank),A(a),v(a),e.onSetLastGame(),e.changeOpenRanking())}),[t.isPlaying]),Object(n.useEffect)((function(){u(t.bank),p(t.bet)}),[t.bet,t.bank]),Object(n.useEffect)((function(){21===t.player_cards_value?(C(!0),t.player_cards_value!==t.dealer_cards_value?Y():B()):t.player_cards_value>21&&(C(!0),U())}),[t.player_cards_value]),Object(n.useEffect)((function(){g&&t.player_cards_value<21&&(t.dealer_cards_value<17&&t.dealer_cards_value<t.player_cards_value?N(1,t.deck_id,a,"SET_DEALER_CARDS"):t.dealer_cards_value<t.player_cards_value?Y():t.player_cards_value===t.dealer_cards_value?B():U(),t.dealer_cards_value>21&&(C(!0),Y()))}),[t.dealer_cards_value,g]),Object(n.useEffect)((function(){t.bank<25&&!t.isPlaying&&!g&&(setTimeout((function(){P(!0),l("You Lost")}),1e3),setTimeout((function(){P(!1),localStorage.removeItem("lastGame"),S(t.deck_id),A(a),v(a),e.onSetLastGame(),function(e){try{e({type:"SET_BANK",payload:1e3})}catch(t){}}(a)}),3e3))}),[t.isPlaying]),Object(n.useEffect)((function(){t.isPlaying&&(N(2,t.deck_id,a,"SET_PLAYER_CARDS"),N(2,t.deck_id,a,"SET_DEALER_CARDS"),function(e,t,a){try{e({type:"SET_BET",payload:t}),e({type:"SET_BANK",payload:a}),e({type:"CHANGE_ROUND"})}catch(n){e({type:"SET_IS_PLAYING",payload:!1})}}(a,_,o))}),[t.isPlaying]);var K;return t.isPlaying||(K=Object(y.jsx)(n.Fragment,{children:Object(y.jsxs)("div",{className:"d-flex justify-content-center",children:[o<=500?Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:o<25,onClick:function(){return w(25)},children:"25$"}):null,Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:o<50,onClick:function(){return w(50)},children:"50$"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:o<100,onClick:function(){return w(100)},children:"100$"}),o>500?Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:o<500,onClick:function(){return w(500)},children:"500$"}):null,Object(y.jsx)("button",{className:"btn btn-light mr-2",onClick:function(){return u(o+_),void p(0)},children:"Clear Bet"}),Object(y.jsx)("button",{className:"btn btn-light mr-2",disabled:_<=0||!!t.isPlaying,onClick:function(){return x(a,!0)},children:"PLAY"})]})})),t.dealer_cards.length&&t.player_cards,t.isPlaying&&t.dealer_cards.length&&t.player_cards&&(K=Object(y.jsx)(I,{onIsStandChange:function(){return C(!g)},isStand:g,onEndRound:T})),Object(y.jsx)("div",{className:"game d-flex justify-content-center align-items-center",children:Object(y.jsxs)("div",{className:"container",children:[Object(y.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(y.jsxs)("p",{className:"m-1",style:{color:"white"},children:["BANK: ",o,"$"]}),Object(y.jsxs)("p",{className:"m-1",style:{color:"white"},children:["BET: ",0===t.bet?_:t.bet,"$"]}),t.isPlaying?Object(y.jsxs)("p",{className:"m-1",style:{color:"white"},children:["Round: ",t.round]}):null]}),K,T?Object(y.jsx)(D,{onOpenRanking:!0,changeOpenRanking:function(){},children:Object(y.jsx)("p",{style:{textAlign:"center"},children:r})}):null]})})},Y=function(e){return Object(y.jsx)(n.Fragment,{children:Object(y.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Rank ",e.index+1,Object(y.jsxs)("span",{className:"badge badge-primary badge-pill",children:[e.rank,"$"]})]})})},U=function(e){var t=E("game"),a=E("ranking"),c=h(),r=Object(n.useState)(!1),i=Object(s.a)(r,2),d=i[0],o=i[1],u=Object(n.useState)({bank:0,bet:0,dealer_cards:[],dealer_cards_value:0,deck_id:"",isPlaying:!1,isStarted:!1,player_cards:[],player_cards_value:0,round:0}),b=Object(s.a)(u,2),j=b[0],_=b[1];window.addEventListener("beforeunload",(function(e){return e.preventDefault(),localStorage.setItem("lastGame",JSON.stringify(t)),localStorage.setItem("ranking",JSON.stringify(a.bestResults)),e.returnValue="ASDASDAD"})),Object(n.useEffect)((function(){var e=localStorage.getItem("lastGame");_(JSON.parse(e))}),[]),Object(n.useEffect)((function(){var e=localStorage.getItem("ranking");!function(e,t){try{e({type:"SET_RANKING",payload:t})}catch(a){console.log("tryCatch setGame BLAD "+a)}}(c,JSON.parse(e))}),[]);var p,O=a.bestResults.sort((function(e,t){return t-e}));p=0===O.length?Object(y.jsx)("p",{style:{textAlign:"center",margin:0},children:"No results"}):O.slice(0,10).map((function(e,t){return Object(y.jsx)(Y,{rank:e,index:t},t)}));var f=Object(y.jsx)(D,{onOpenRanking:d,changeOpenRanking:function(){return o(!d)},children:Object(y.jsxs)(n.Fragment,{children:[Object(y.jsx)("div",{className:"d-flex justify-content-center",children:Object(y.jsx)("h1",{style:{textAlign:"center"},children:"TOP HISTORIC RESULTS"})}),Object(y.jsx)("ul",{className:"list-group",children:p})]})});return Object(y.jsx)(n.Fragment,{children:t.isStarted?Object(y.jsx)(w,{onSetLastGame:function(){return _(Object(l.a)(Object(l.a)({},j),{},{bank:0,bet:0,dealer_cards:[],dealer_cards_value:0,deck_id:"",isPlaying:!1,isStarted:!1,player_cards:[],player_cards_value:0,round:0}))},changeOpenRanking:function(){return o(!d)}}):Object(y.jsxs)("div",{className:"mainPage container-fluid d-flex justify-content-center align-items-center",children:[f,Object(y.jsx)("button",{className:"btn btn-light mt-6 mr-2",onClick:function(){return A(c)},children:"New Game"}),Object(y.jsx)("button",{className:"btn btn-light mt-6 mr-2 ml-2",onClick:function(){return o(!d)},children:"Ranking"}),0!==j.round?Object(y.jsx)("button",{className:"btn btn-light mt-6 ml-2",onClick:function(){return function(e,t){try{e({type:"SET_CONTINUE_GAME",payload:t})}catch(a){}}(c,j)},children:"Continue"}):null]})})},B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,426)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),r(e),l(e)}))};r.a.render(Object(y.jsx)(n.StrictMode,{children:Object(y.jsx)(f,{children:Object(y.jsx)(U,{})})}),document.getElementById("root")),B()}},[[409,1,2]]]);
//# sourceMappingURL=main.01b16bb1.chunk.js.map